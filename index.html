<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Quản lý nhân viên</title>

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Bootstrap 4 -->
	<link rel="stylesheet" href="css/bootstrap.min.css">

	<!-- JQuery UI -->
	<link rel="stylesheet" href="css/jquery-ui.min.css">

	<!-- Animate -->
	<!-- <link rel="stylesheet" href="css/animate.css"> -->

	<!-- My CSS -->
	<link rel="stylesheet" href="css/modal.css">

	<link rel="stylesheet" href="css/style4.css">

	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body>

	<div class="wrapper">
		<!-- Sidebar Holder -->
		<nav id="sidebar">
			<div class="sidebar-header">
				<h3>Bootstrap Sidebar</h3>
				<strong>BS</strong>
			</div>

			<ul class="list-unstyled components">
				<li class="active">
					<a href="#homeSubmenu">
						<i class="fa fa-home"></i>
						Home
					</a>
				</li>
				<li>
					<a href="#">
						<i class="fa fa-briefcase"></i>
						About
					</a>
					<a href="#pageSubmenu">
						<i class="fa fa-files-o"></i>
						Pages
					</a>
				</li>
				<li>
					<a href="#">
						<i class="fa fa-link"></i>
						Portfolio
					</a>
				</li>
				<li>
					<a href="#">
						<i class="fa fa-paperclip"></i>
						FAQ
					</a>
				</li>
				<li>
					<a href="#">
						<i class="fa fa-paper-plane"></i>
						Contact
					</a>
				</li>
			</ul>

			<ul class="list-unstyled CTAs">
				<li><a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download">Download source</a>
				</li>
				<li><a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article">Back to article</a></li>
			</ul>
		</nav>

		<!-- Page Content Holder -->
		<div id="content">
			<nav class="navbar navbar-default">
				<div class="container-fluid">

					<div class="navbar-header">
						<button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn">
							<i class="glyphicon glyphicon-align-left"></i>
							<span>Toggle Sidebar</span>
						</button>
					</div>

					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#">Page</a></li>
							<li><a href="#">Page</a></li>
							<li><a href="#">Page</a></li>
							<li><a href="#">Page</a></li>
						</ul>
					</div>
				</div>
			</nav>


			<div class="container">
				<div class="card text-center">
					<!-- Header -->
					<div class="card-header myCardHeader">
						<div class="row">
							<div class="col-md-6">
								<h3 class="text-left text-primary font-weight-bold">Danh sách nhân viên</h3>
							</div>
							<div class="col-md-6 text-right">
								<button class="btn btn-warning"  onclick="resetData()">Reset Data</button>
								<button class="btn btn-primary" id="btnThem" data-toggle="modal"
									data-target="#myModal">Thêm nhân viên</button>
							</div>
						</div>
					</div>

					<!-- Body -->
					<div class="card-body">
						<div class="row mb-3">
							<div class="col">
								<div class="input-group">
									<input type="text" class="form-control" placeholder="Loại nhân viên" id="searchName">
									<div class="input-group-prepend" onclick=" timNhanVien()">
										<span class="input-group-text" id="btnTimNV"><i class="fa fa-search"></i></span>
									</div>
								</div>
							</div>
						</div>
						<table class="table table-bordered table-hover myTable">
							<thead class="text-primary">
								<tr>
									<th class="nowrap" onclick="sapXepNhanVien()">
										<span class="mr-1">Tài khoản</span>
										<i class="fa fa-arrow-up" id="SapXepTang"></i>
										<i class="fa fa-arrow-down" id="SapXepGiam"></i>
									</th>
									<th>Họ và tên</th>
									<th>Email</th>
									<th>Ngày làm</th>
									<th>Chức vụ</th>									
									<th>Tổng lương</th>
									<th onclick="sapXepLoaiNhanVien()">Xếp loại</th>
									<th><em class="fa fa-cog"></em></th>
								</tr>
							</thead>
							<tbody id="tableDanhSach">

							</tbody>
						</table>
					</div>

					<!-- Footer -->
					<div class="card-footer myCardFooter">
						<nav>
							<ul class="pagination justify-content-center" id="ulPhanTrang">

							</ul>
						</nav>
					</div>
				</div>
			</div>

		</div>
	</div>


	<!-- The Modal -->
	<div class="modal fade" id="myModal">
		<div class="modal-dialog">
			<div class="modal-content">

				<header class="head-form mb-0">
					<h2 id="header-title">Sign Up</h2>
				</header>

				<!-- Modal Header -->
				<!-- 	<div class="modal-header">
					<h4 class="modal-title" id="modal-title">Modal Heading</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div> -->

				<!-- Modal body -->
				<div class="modal-body">

					<form role="form">

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-user"></i></span>
								</div>
								<input type="text" name="tk" id="tknv" class="form-control input-sm"
									placeholder="Tài khoản">

									<div name="index" id="index" style="display: none;"></div>
							</div>

							<span class="sp-thongbao" id="tbTKNV"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-address-book"></i></span>
								</div>
								<input type="name" name="name" id="name" class="form-control input-sm"
									placeholder="Họ và tên">
							</div>
							<span class="sp-thongbao" id="tbTen"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-envelope"></i></span>
								</div>
								<input type="email" name="email" id="email" class="form-control input-sm"
									placeholder="Email">
							</div>

							<span class="sp-thongbao" id="tbEmail"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-key"></i></span>
								</div>
								<input type="password" name="password" id="password" class="form-control input-sm"
									placeholder="Mật khẩu">
							</div>
							<span class="sp-thongbao" id="tbMatKhau"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-calendar"></i></span>
								</div>
								<input type="text" name="ngaylam" id="datepicker" class="form-control"
									placeholder="Ngày làm">
							</div>

							<span class="sp-thongbao" id="tbNgay"></span>
						</div>
						
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-money" aria-hidden="true"></i></span>
								</div>
								<input type="text" name="luongCB" id="luongCB" class="form-control input-sm"
									placeholder="Lương cơ bản">
							</div>
							<span class="sp-thongbao" id="tbLuongCB"></span>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-briefcase"></i></span>
								</div>
								<select class="form-control" id="chucvu">
									<option>Chọn chức vụ</option>
									<option>Sếp</option>
									<option>Trưởng phòng</option>
									<option>Nhân viên</option>
								</select>
							</div>

							<span class="sp-thongbao" id="tbChucVu"></span>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-clock-o" aria-hidden="true"></i></span>
								</div>
								<input type="text" name="gioLam" id="gioLam" class="form-control input-sm"
									placeholder="Giờ làm">
							</div>
							<span class="sp-thongbao" id="tbGiolam"></span>
						</div>

					</form>
				</div>

				<!-- Modal footer -->
				<div class="modal-footer" id="modal-footer">
					<button id="btnThemNV" type="button" onclick="themNhanVienForm()" data-dismiss="modal" class="btn btn-success">Thêm người dùng</button>
					<!-- <button id="btnCapNhat" type="button" class="btn btn-success" onclick="suaNhanVien()"   data-dismiss="modal">Cập nhật</button> -->
					<button id="btnDong" type="button" class="btn btn-danger" data-dismiss="modal" >Đóng</button>
				</div>

			</div>
		</div>
	</div>

    

	<!-- The Modal Edit-->
	<div class="modal fade" id="myModalEdit">
		<div class="modal-dialog">
			<div class="modal-content">

				<header class="head-form mb-0">
					<h2 id="header-title">Edit</h2>
				</header>

				<!-- Modal Header Edit -->
				<!-- 	<div class="modal-header">
					<h4 class="modal-title" id="modal-title">Modal Heading</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div> -->

				<!-- Modal body Edit-->
				<div class="modal-body">

					<form role="form">

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-user"></i></span>
								</div>
								<input type="text" name="tk" id="tknvEdit" class="form-control input-sm"
									placeholder="Tài khoản">

									<div name="index" id="indexEdit" style="display: none;"></div>
							</div>

							<span class="sp-thongbao" id="tbTKNV__Edit"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-address-book"></i></span>
								</div>
								<input type="name" name="name" id="nameEdit" class="form-control input-sm"
									placeholder="Họ và tên">
							</div>
							<span class="sp-thongbao" id="tbTen__Edit"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-envelope"></i></span>
								</div>
								<input type="email" name="email" id="emailEdit" class="form-control input-sm"
									placeholder="Email">
							</div>

							<span class="sp-thongbao" id="tbEmail__Edit"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-key"></i></span>
								</div>
								<input type="password" name="password" id="passwordEdit" class="form-control input-sm"
									placeholder="Mật khẩu">
							</div>
							<span class="sp-thongbao" id="tbMatKhau__Edit"></span>
						</div>

						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-calendar"></i></span>
								</div>
								<input type="text" name="ngaylam" id="datepickerEdit" class="form-control"
									placeholder="Ngày làm">
							</div>

							<span class="sp-thongbao" id="tbNgay__Edit"></span>
						</div>
						
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-money" aria-hidden="true"></i></span>
								</div>
								<input type="text" name="luongCB" id="luongCBEdit" class="form-control input-sm"
									placeholder="Lương cơ bản">
							</div>
							<span class="sp-thongbao" id="tbLuongCB__Edit"></span>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-briefcase"></i></span>
								</div>
								<select class="form-control" id="chucvuEdit">
									<option>Chọn chức vụ</option>
									<option>Sếp</option>
									<option>Trưởng phòng</option>
									<option>Nhân viên</option>
								</select>
							</div>

							<span class="sp-thongbao" id="tbChucVu__dit"></span>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-clock-o" aria-hidden="true"></i></span>
								</div>
								<input type="text" name="gioLam" id="gioLamEdit" class="form-control input-sm"
									placeholder="Giờ làm">
							</div>
							<span class="sp-thongbao" id="tbGiolam__Edit"></span>
						</div>

					</form>
				</div>

				<!-- Modal footer Edit-->
				<div class="modal-footer" id="modal-footer">
					<button id="btnCapNhat" type="button" class="btn btn-success" onclick="suaNhanVien()"   data-dismiss="modal">Cập nhật</button>
					<button id="btnDong" type="button" class="btn btn-danger" data-dismiss="modal" >Đóng</button>
				</div>

			</div>
		</div>
	</div>




<div id="output"></div>

	<!-- Bootstrap -->
	<script src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.easing.min.js"></script>
	<script type="text/javascript" src="js/popper.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>

	<!-- Date Picker -->
	<!-- <script src="js/jquery-ui.min.js"></script> -->
	<script src="./js/jquery-ui.js"></script>
	<script src="js/datepicker.js"></script>

	<!-- Wow -->
	<!-- <script src="js/wow.min.js"></script>	
	<script>
		new WOW().init();
	</script>  -->

	<!-- <script src="js/modal.js"></script> -->


	<script type="text/javascript">
		$(document).ready(function () {
			$('#sidebarCollapse').on('click', function () {
				$('#sidebar').toggleClass('active');
			});
		});
	</script>


<script>

	
	
	// let danhSachNhanVien = [];

	let danhSachNhanVien=localStorage.getItem("NhanVien") ? JSON.parse(localStorage.getItem("NhanVien")):[]
	
  if(danhSachNhanVien.length>0){
	inDanhSachNhanVien();
  }
	// console.log('danhSachNhanVien....',danhSachNhanVien)

	function resetData(){
		inDanhSachNhanVien();
	}


	function themNhanVienForm(){

		let taiKhoan = document.getElementById('tknv').value.trim();
		let hoTen = document.getElementById('name').value.trim();
		let email = document.getElementById('email').value.trim();
		let matKhau = document.getElementById('password').value.trim();
		let ngayLam = document.getElementById('datepicker').value.trim();
		let luongCoBan = document.getElementById('luongCB').value.trim();
		let chucVu = document.getElementById('chucvu').value.trim();
		let gioLamThang = document.getElementById('gioLam').value.trim();

		validateThemNhanVienForm(taiKhoan,hoTen,email,matKhau,ngayLam,luongCoBan,chucVu,gioLamThang)


	}

	
	function validateThemNhanVienForm(taiKhoan,hoTen,email,matKhau,ngayLam,luongCoBan,chucVu,gioLamThang) {
		clearErrorMessages();
		let isValid = true;

		if (!validateTaiKhoan(taiKhoan)) {
                showError('tbTKNV', 'Tài khoản phải là số có độ dài từ 4 đến 6 ký tự.');
                isValid = false;
            }

            if (!validateTenNhanVien(hoTen)) {
                showError('tbTen', 'Tên nhân viên không được để trống và phải là chữ.');
                isValid = false;
            }

            if (!validateEmail(email)) {
                showError('tbEmail', 'Email không hợp lệ.');
                isValid = false;
            }

            if (!validateMatKhau(matKhau)) {
                showError('tbMatKhau', 'Mật khẩu từ 6-10 ký tự (chứa ít nhất 1 ký tự số, 1 ký tự in hoa, 1 ký tự đặc biệt), không để trống.');
                isValid = false;
            }

            if (!validateNgayLam(ngayLam)) {
                showError('tbNgay', 'Ngày làm không được để trống.');
                isValid = false;
            }

            if (!validateLuongCoBan(luongCoBan)) {
                showError('tbLuongCB', 'Lương cơ bản phải từ 1,000,000 đến 20,000,000 và không được để trống.');
                isValid = false;
            }

            if (!validateChucVu(chucVu)) {
                showError('tbChucVu', 'Chức vụ phải được chọn hợp lệ.');
                isValid = false;
            }

            if (!validateGioLamThang(gioLamThang)) {
                showError('tbGiolam', 'Số giờ làm trong tháng phải từ 80 đến 200 và không được để trống.');
                isValid = false;
            }


		if(isValid){
			themNhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang);
			clearThemNhanVienForm()

		}



	}


	function clearErrorMessages() {
            document.getElementById('tbTKNV').innerText = '';
            document.getElementById('tbTen').innerText = '';
            document.getElementById('tbEmail').innerText = '';
            document.getElementById('tbMatKhau').innerText = '';
            document.getElementById('tbNgay').innerText = '';
            document.getElementById('tbLuongCB').innerText = '';
            document.getElementById('tbChucVu').innerText = '';
            document.getElementById('tbGiolam').innerText = '';
        }




		
	

		
	


	

	function NhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang){
		return {
			taiKhoan,
			hoTen,
			email,
			matKhau,
			ngayLam,
			luongCoBan,
			chucVu,
			gioLamThang,
			tongLuong:tinhTongLuong(chucVu,luongCoBan,gioLamThang),
			xepLoai:xepLoaiNhanVien(gioLamThang),



		}
	}


		function tinhTongLuong (chucVu,luongCoBan,gioLamThang) {
			return tinhHeSoLuongNhanVien(chucVu,luongCoBan) * gioLamThang;
		}

		function  tinhHeSoLuongNhanVien(chucVu,luongCoBan){
		if(chucVu==='Sếp'){
			return luongCoBan*3;
		}else if(chucVu==='Trưởng phòng'){
			return luongCoBan*2;
		}else if(chucVu==='Nhân viên'){
			return luongCoBan;
		}
	}

	function  xepLoaiNhanVien(gioLamThang) {
			if(gioLamThang>=0 && gioLamThang<160){
			return "Nhân viên trung bình";

			}else if(gioLamThang>=160 && gioLamThang<176){

				return "Nhân viên khá";
			}else if(gioLamThang>=176 && gioLamThang<192){

				return "Nhân viên giỏi";
			}
			else if(gioLamThang>=192){

			return "Nhân viên xuất xắc";
			}
		}
	

	
	function themNhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang) {

	 const nhanVienMoi=	NhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang)
	 danhSachNhanVien.push(nhanVienMoi);



	 const jsonData = JSON.stringify(danhSachNhanVien);

// Lưu chuỗi JSON vào localStorage với một key cụ thể
localStorage.setItem('NhanVien', jsonData);
	
		inDanhSachNhanVien();
	 

		// let nhanVienMoi = new NhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang);
		
	
		// let outputDiv = document.getElementById("output");
		// outputDiv.innerHTML = "<p>Nhân viên đã được thêm thành công!</p>";


		

		
	}

	function xoaNhanVien(index) {

		var xacNhan = confirm("Bạn có chắc chắn muốn xóa nhân viên này không?");
		if(xacNhan){
			danhSachNhanVien.splice(index,1)

			const jsonData = JSON.stringify(danhSachNhanVien);

// Lưu chuỗi JSON vào localStorage với một key cụ thể
localStorage.setItem('NhanVien', jsonData);

	       inDanhSachNhanVien();
		}



   }




function layThongTinNhanVien(index) {

      const hienTaiNhanVien=danhSachNhanVien[index]
      document.getElementById('indexEdit').innerText=index;

      document.getElementById('tknvEdit').value=hienTaiNhanVien.taiKhoan;
	  document.getElementById('nameEdit').value=hienTaiNhanVien.hoTen;
	  document.getElementById('emailEdit').value=hienTaiNhanVien.email;
	  	document.getElementById('passwordEdit').value=hienTaiNhanVien.matKhau;
	 document.getElementById('datepickerEdit').value=hienTaiNhanVien.ngayLam;
	document.getElementById('luongCBEdit').value=hienTaiNhanVien.luongCoBan;
	 document.getElementById('chucvuEdit').value=hienTaiNhanVien.chucVu;
	document.getElementById('gioLamEdit').value=hienTaiNhanVien.gioLamThang;
}


function suaNhanVien() {
	   
	    let index = parseInt(document.getElementById('indexEdit').innerText);
	    let taiKhoan = document.getElementById('tknvEdit').value;
		let hoTen = document.getElementById('nameEdit').value;
		let email = document.getElementById('emailEdit').value;
		let matKhau = document.getElementById('passwordEdit').value;
		let ngayLam = document.getElementById('datepickerEdit').value;
		let luongCoBan = document.getElementById('luongCBEdit').value;
		let chucVu = document.getElementById('chucvuEdit').value;
		let gioLamThang = document.getElementById('gioLamEdit').value;

	    
		validateEditNhanVienForm(index,taiKhoan,hoTen,email,matKhau,ngayLam,luongCoBan,chucVu,gioLamThang)

}


function validateEditNhanVienForm(index,taiKhoan,hoTen,email,matKhau,ngayLam,luongCoBan,chucVu,gioLamThang) {
		clearErrorMessages();
		let isValid = true;

		if (!validateTaiKhoan(taiKhoan)) {
                showError('tbTKNV__Edit', 'Tài khoản phải là số có độ dài từ 4 đến 6 ký tự.');
                isValid = false;
            }

            if (!validateTenNhanVien(hoTen)) {
                showError('tbTen__Edit', 'Tên nhân viên không được để trống và phải là chữ.');
                isValid = false;
            }

            if (!validateEmail(email)) {
                showError('tbEmail__Edit', 'Email không hợp lệ.');
                isValid = false;
            }

            if (!validateMatKhau(matKhau)) {
                showError('tbMatKhau__Edit', 'Mật khẩu từ 6-10 ký tự (chứa ít nhất 1 ký tự số, 1 ký tự in hoa, 1 ký tự đặc biệt), không để trống.');
                isValid = false;
            }

            if (!validateNgayLam(ngayLam)) {
                showError('tbNgay__Edit', 'Ngày làm không được để trống.');
                isValid = false;
            }

            if (!validateLuongCoBan(luongCoBan)) {
                showError('tbLuongCB__Edit', 'Lương cơ bản phải từ 1,000,000 đến 20,000,000 và không được để trống.');
                isValid = false;
            }

            if (!validateChucVu(chucVu)) {
                showError('tbChucVu__Edit', 'Chức vụ phải được chọn hợp lệ.');
                isValid = false;
            }

            if (!validateGioLamThang(gioLamThang)) {
                showError('tbGiolam__Edit', 'Số giờ làm trong tháng phải từ 80 đến 200 và không được để trống.');
                isValid = false;
            }


		if(isValid){
			const nhanVienMoi=NhanVien(taiKhoan, hoTen, email, matKhau, ngayLam, luongCoBan, chucVu, gioLamThang);
			// clearThemNhanVienForm()

		     danhSachNhanVien[index]=nhanVienMoi

			 const jsonData = JSON.stringify(danhSachNhanVien);

			// // Lưu chuỗi JSON vào localStorage với một key cụ thể
			localStorage.setItem('NhanVien', jsonData);

			// console.log('danhSachNhanVienlllllll',danhSachNhanVien)


		     inDanhSachNhanVien();
		}



	}



	function clearErrorMessagesEdit() {
            document.getElementById('tbTKNV__Edit').innerText = '';
            document.getElementById('tbTen__Edit').innerText = '';
            document.getElementById('tbEmail__Edit').innerText = '';
            document.getElementById('tbMatKhau__Edit').innerText = '';
            document.getElementById('tbNgay__Edit').innerText = '';
            document.getElementById('tbLuongCB__Edit').innerText = '';
            document.getElementById('tbChucVu__Edit').innerText = '';
            document.getElementById('tbGiolam__Edit').innerText = '';
        }


		function showError(elementId, message) {
			document.getElementById(elementId).style.display = 'block';
            document.getElementById(elementId).innerText = message;
        }

		function validateTaiKhoan(taiKhoan) {
            return /^\d{4,6}$/.test(taiKhoan);
        }

        function validateTenNhanVien(hoTen) {
            return hoTen !== '' && /^[a-zA-Z\s]+$/.test(hoTen);
        }

        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function validateMatKhau(matKhau) {
            // Ít nhất 6 ký tự, chứa ít nhất 1 ký tự số, 1 ký tự in hoa, 1 ký tự đặc biệt
            return /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+])[0-9a-zA-Z!@#$%^&*()_+]{6,10}$/.test(matKhau);
        }

        function validateNgayLam(ngayLam) {
            return ngayLam !== '';
        }

        function validateLuongCoBan(luongCoBan) {
            const luongNumber = parseInt(luongCoBan, 10);
            return !isNaN(luongNumber) && luongNumber >= 1000000 && luongNumber <= 20000000 && luongCoBan !== '';
        }

        function validateChucVu(chucVu) {
            return ['Sếp', 'Trưởng phòng', 'Nhân viên'].includes(chucVu);
        }

        function validateGioLamThang(gioLamThang) {
            const gioLamNumber = parseInt(gioLamThang, 10);
            return !isNaN(gioLamNumber) && gioLamNumber >= 80 && gioLamNumber <= 200 && gioLamThang !== '';
        }




function timNhanVien() {
	    
 const searchName= document.getElementById('searchName').value.trim();
 const danhSachNhanVienTimDuoc= danhSachNhanVien.filter((NhanVien,index)=>{
	return NhanVien.xepLoai==searchName
 })


inDanhSachNhanVienTimDuoc(danhSachNhanVienTimDuoc)
  
}


function sapXepNhanVien() {
	danhSachNhanVien.sort(function(a, b) {
        return a.taiKhoan.localeCompare(b.taiKhoan);
    });
	inDanhSachNhanVien() 
}



function sapXepLoaiNhanVien() {
   danhSachNhanVien.sort(function(a, b) {
	return a.xepLoai.localeCompare(b.xepLoai);
});
inDanhSachNhanVien() 
}




	
    

	function inDanhSachNhanVien() {
		// console.log('danhSachNhanVien9999',danhSachNhanVien)
		let outputDiv = document.getElementById("tableDanhSach");
		
		 outputDiv.innerHTML = "";


		danhSachNhanVien.forEach((nhanVien,index) => {
			let row = document.createElement("tr");

			let taiKhoanCell = document.createElement("td");
			taiKhoanCell.textContent = nhanVien.taiKhoan;
			row.appendChild(taiKhoanCell);

			let hoTenCell = document.createElement("td");
			hoTenCell.textContent = nhanVien.hoTen;
			row.appendChild(hoTenCell);

			let emailCell = document.createElement("td");
			emailCell.textContent = nhanVien.email;
			row.appendChild(emailCell);

			let ngayLamCell = document.createElement("td");
			ngayLamCell.textContent = nhanVien.ngayLam;
			row.appendChild(ngayLamCell);

			let chucVuCell = document.createElement("td");
			chucVuCell.textContent = nhanVien.chucVu;
			row.appendChild(chucVuCell);

			let tongLuongCell = document.createElement("td");
			tongLuongCell.textContent = nhanVien.tongLuong;
			row.appendChild(tongLuongCell);

			let xepLoaiCell = document.createElement("td");
			xepLoaiCell.textContent = nhanVien.xepLoai;
			row.appendChild(xepLoaiCell);

			let cogCell = document.createElement("td");
			cogCell.innerHTML = `<button class="btn btn-danger" onClick="xoaNhanVien(${index})">Xóa</button> <button class="btn btn-success" onClick="layThongTinNhanVien(${index})" data-toggle="modal"
									data-target="#myModalEdit">Sửa</button>`;
			row.appendChild(cogCell);

			// Append the row to the table body
			outputDiv.appendChild(row);
		});


				// 		// Clear existing content
				// 		outputDiv.innerHTML = "";

				// // Loop through the danhSachNhanVien array and build HTML string
				// let htmlString = danhSachNhanVien.map(nhanVien => {
				// 	return `
				// 		<tr>
				// 			<td>${nhanVien.taiKhoan}</td>
				// 			<td>${nhanVien.hoTen}</td>
				// 			<td>${nhanVien.email}</td>
				// 			<td>${nhanVien.ngayLam}</td>
				// 			<td>${nhanVien.chucVu}</td>
				// 			<td>${nhanVien.tongLuong}</td>
				// 			<td>${nhanVien.xepLoai}</td>
				// 			<td><em class="fa fa-cog"></em></td>
				// 		</tr>
				// 	`;
				// }).join('');

				// // Append the HTML string to tbody
				// outputDiv.innerHTML = htmlString;

				// Cả 2 cách này đều ok





	}




	function inDanhSachNhanVienTimDuoc(danhSachNhanVienTimDuoc) {
	
		let outputDiv = document.getElementById("tableDanhSach");
		
		 outputDiv.innerHTML = "";


		 danhSachNhanVienTimDuoc.forEach((nhanVien,index) => {
			let row = document.createElement("tr");

			let taiKhoanCell = document.createElement("td");
			taiKhoanCell.textContent = nhanVien.taiKhoan;
			row.appendChild(taiKhoanCell);

			let hoTenCell = document.createElement("td");
			hoTenCell.textContent = nhanVien.hoTen;
			row.appendChild(hoTenCell);

			let emailCell = document.createElement("td");
			emailCell.textContent = nhanVien.email;
			row.appendChild(emailCell);

			let ngayLamCell = document.createElement("td");
			ngayLamCell.textContent = nhanVien.ngayLam;
			row.appendChild(ngayLamCell);

			let chucVuCell = document.createElement("td");
			chucVuCell.textContent = nhanVien.chucVu;
			row.appendChild(chucVuCell);

			let tongLuongCell = document.createElement("td");
			tongLuongCell.textContent = nhanVien.tongLuong;
			row.appendChild(tongLuongCell);

			let xepLoaiCell = document.createElement("td");
			xepLoaiCell.textContent = nhanVien.xepLoai;
			row.appendChild(xepLoaiCell);

			let cogCell = document.createElement("td");
			cogCell.innerHTML = `<button class="btn btn-danger" onClick="xoaNhanVien(${index})">Xóa</button> <button class="btn btn-success" onClick="layThongTinNhanVien(${index})" data-toggle="modal"
									data-target="#myModalEdit">Sửa</button>`;
			row.appendChild(cogCell);

			// Append the row to the table body
			outputDiv.appendChild(row);
		});

	}




	function clearThemNhanVienForm(){
		document.getElementById('tknv').value="";
		
		document.getElementById('name').value="";
		document.getElementById('email').value="";
		document.getElementById('password').value="";
		 document.getElementById('datepicker').value="";
		document.getElementById('luongCB').value="";
		document.getElementById('chucvu').value="";
		document.getElementById('gioLam').value="";

	}




	





	
	</script>








</body>

</html>